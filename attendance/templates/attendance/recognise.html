{% extends "base.html" %}
{% load static %}
{% block title %}Recognise{% endblock %}

{% block content %}
<h1 class="mb-4">Recognise &amp; Mark Attendance</h1>

<div class="d-flex flex-column align-items-center gap-3">

  <!-- Pass API URL to JS via data-api -->
  <video id="cam"
         data-api="{% url 'recognise_api' %}"
         autoplay playsinline
         class="border rounded w-100 w-md-50"></video>

  <!-- prompt changes (“look left”…) -->
  <h5 id="prompt" class="text-primary mt-3"></h5>
  <p id="status" class="small text-muted"></p>
</div>

<!-- toast for success -->
<div class="position-fixed top-0 end-0 p-3" style="z-index:1080">
  <div id="recToast" class="toast align-items-center text-bg-success border-0">
    <div class="d-flex">
      <div id="toastMsg" class="toast-body fw-bold"></div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
      <button id="resetBtn" class="btn btn-outline-secondary mt-3"> Reset Challenge</button>
    </div>
  </div>
</div>

<!-- Head-pose script -->
<script defer src="{% static 'attendance/js/recognise_mesh.js' %}"></script>
{% endblock %}
